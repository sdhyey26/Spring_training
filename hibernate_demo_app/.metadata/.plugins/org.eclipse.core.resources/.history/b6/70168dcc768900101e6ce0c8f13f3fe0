package com.tss.Service;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.mail.SimpleMailMessage;
import org.springframework.mail.javamail.JavaMailSender;
import org.springframework.stereotype.Service;

import com.tss.Dto.MailRequestDto;
import com.tss.Dto.MailResponseDto;

@Service
public class MailServiceImpl implements MailService  {
	  @Autowired
	    private JavaMailSender mailSender;

	    @Override
	    public MailResponseDto sendMail(MailRequestDto mailRequestDto) {
	        try {
	            SimpleMailMessage message = new SimpleMailMessage();
	            message.setFrom("shiyald26@gmail.com.com"); 
	            message.setTo(mailRequestDto.getReceiver());
	            message.setSubject(mailRequestDto.getSubject());
	            message.setText(mailRequestDto.getContent());

	            mailSender.send(message);

	            return new MailResponseDto("SUCCESS", "Mail sent successfully to " + mailRequestDto.getReceiver());
	        } catch (Exception e) {
	            return new MailResponseDto("FAILED", "Error sending mail: " + e.getMessage());
	        }
	    }
}
